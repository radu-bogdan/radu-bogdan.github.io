:root{--color-bg: #ffffff;--color-ink: #0b1323;--color-muted: #5b6575;--color-accent: #2b6fe2;--color-red: #d62d20;--color-blue: #0072ce;--color-yellow: #b7791f;--color-grid: #e5e9f2;--color-border: #d7dde8;--surface-card: #ffffff;--surface-alt: #f6f8fb;--space-1: 4px;--space-2: 6px;--space-3: 8px;--space-4: 10px;--space-5: 12px;--space-6: 14px;--space-7: 16px;--space-8: 18px;--space-9: 24px;--space-10:30px;--fs-xs: 10px;--fs-sm: 11px;--fs-base: 13px;--fs-h2: 16px;--fs-h1: 22px;--ff-sans: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Arial;--ff-mono: ui-monospace, SFMono-Regular, Menlo, Consolas, "Liberation Mono", monospace;--radius-sm: 6px;--radius-md: 8px;--radius-lg: 14px;--radius-input:10px;--coeff-drag-w: 30px;--coeff-flip-min: 38px;--shadow-card: 0 6px 24px rgba(20,34,66,.06);--shadow-btn: 0 2px 4px rgba(0,0,0,.08);--transition-fast: .15s;--col-label: 140px;--col-tail: 120px;--slider-thumb-shadow: 0 0 0 4px rgba(43,111,226,.15), 0 2px 6px rgba(0,0,0,.25)}*{box-sizing:border-box}body{margin:0;background:var(--color-bg);color:var(--color-ink);font-family:var(--ff-sans)}.app{width:min(1100px,100%);margin:var(--space-2) auto;display:grid;gap:var(--space-8)}.panel{display:grid;gap:var(--space-3);padding:var(--space-6)}.panel--split{grid-template-columns:1fr 260px;align-items:start}.panel-left{display:flex;flex-direction:column;gap:var(--space-6)}.controls{display:grid;gap:var(--space-5);padding:var(--space-6) var(--space-7) var(--space-8)}.controls--bottom{margin-top:auto}.row{display:grid;grid-template-columns:var(--col-label) 1fr var(--col-tail);gap:var(--space-5);align-items:center}.row--compact{grid-template-columns:var(--col-label) 1fr}.row-3{display:grid;grid-template-columns:repeat(3,1fr);gap:var(--space-4)}.card{background:var(--surface-card);border:1px solid var(--color-border);border-radius:var(--radius-lg);box-shadow:var(--shadow-card)}header h1{margin:0 0 var(--space-1);font-size:var(--fs-h1)}header p{margin:0;color:var(--color-muted)}.mini-title{margin:0;font-size:var(--fs-base);font-weight:600;color:var(--color-muted)}label{color:var(--color-muted);font-size:var(--fs-base)}input[type=text]{width:100%;padding:var(--space-4) var(--space-5);border:1px solid var(--color-border);border-radius:var(--radius-input);font-size:var(--fs-base);background:#fff}input[type=text]:focus{outline:2px solid rgba(43,111,226,.2);border-color:var(--color-accent)}input[type=range]{width:100%;height:6px;appearance:none;background:var(--color-grid);border-radius:999px;cursor:pointer}input[type=range]::-webkit-slider-thumb{appearance:none;width:23px;height:20px;border-radius:50%;background:transparent;border:1px solid var(--color-accent);box-shadow:var(--slider-thumb-shadow);transition:background var(--transition-fast),box-shadow var(--transition-fast),transform var(--transition-fast);-webkit-backdrop-filter:blur(2px);backdrop-filter:blur(2px)}input[type=range]:hover::-webkit-slider-thumb{box-shadow:0 0 0 6px #2b6fe238,0 2px 8px #0000004d}input[type=range]:active::-webkit-slider-thumb{transform:scale(.92);box-shadow:0 0 0 8px #2b6fe247,0 2px 10px #00000059}input[type=range]:focus-visible::-webkit-slider-thumb{outline:2px solid rgba(43,111,226,.5);outline-offset:2px}input[type=range]::-moz-range-track{height:6px;background:var(--color-grid);border-radius:999px}input[type=range]::-moz-range-thumb{width:32px;height:32px;border-radius:50%;background:transparent;border:3px solid var(--color-accent);box-shadow:var(--slider-thumb-shadow);transition:background var(--transition-fast),box-shadow var(--transition-fast),transform var(--transition-fast);cursor:pointer}input[type=range]:hover::-moz-range-thumb{box-shadow:0 0 0 6px #2b6fe238,0 2px 8px #0000004d}input[type=range]:active::-moz-range-thumb{transform:scale(.92);box-shadow:0 0 0 8px #2b6fe247,0 2px 10px #00000059}@media (forced-colors: active){input[type=range]::-webkit-slider-thumb{background:Canvas;border:2px solid Highlight}input[type=range]::-moz-range-thumb{background:Canvas;border:2px solid Highlight}}:where(.btn,.coeff .flip-btn,.help-btn,.text-popup__close,.text-popup__max){--_btn-bg: var(--surface-alt);--_btn-color: var(--color-muted);--_btn-border: var(--color-border);border:1px solid var(--_btn-border);background:var(--_btn-bg);color:var(--_btn-color);font-size:11px;padding:4px 6px;border-radius:6px;line-height:1;cursor:pointer;font-weight:600;display:inline-flex;align-items:center;justify-content:center;gap:4px;text-decoration:none;transition:background var(--transition-fast),color var(--transition-fast),border-color var(--transition-fast),box-shadow var(--transition-fast),transform var(--transition-fast)}:where(.btn,.coeff .flip-btn,.help-btn,.text-popup__close,.text-popup__max):hover{background:#eef3fa;color:#111;border-color:var(--color-accent)}:where(.btn,.coeff .flip-btn,.help-btn,.text-popup__close,.text-popup__max):active{background:#dbe7f6}:where(.btn,.coeff .flip-btn,.help-btn,.text-popup__close,.text-popup__max):focus-visible{outline:2px solid rgba(43,111,226,.5);outline-offset:2px}.coeff .flip-btn{min-width:var(--coeff-flip-min)}.help-btn-wrap{margin-top:var(--space-1);display:flex;justify-content:flex-start;gap:var(--space-4)}.help-btn{--_btn-bg: linear-gradient(#fff,#f5f8fd);--_btn-color: var(--color-accent);--_btn-border: var(--color-accent);box-shadow:var(--shadow-btn)}.help-btn:hover{--_btn-bg: linear-gradient(#f8fbff,#e9f2fd)}.help-btn:active{transform:translateY(1px)}body.theme-changing :where(.btn,.coeff .flip-btn,.help-btn,.text-popup__close,.text-popup__max){transition:none!important}.coeffs{display:flex;flex-direction:column;gap:var(--space-6);padding:var(--space-7)}.coeffs__title{margin:0;font-size:var(--fs-h2)}.coeff{display:flex;flex-direction:column;gap:var(--space-1);position:relative}.coeff .coeff-row{display:flex;align-items:stretch;gap:var(--space-2)}.coeff .coeff-row input{flex:1;min-width:0}.coeff .coeff-drag{position:relative;width:var(--coeff-drag-w);display:flex;flex-direction:column;gap:2px;align-items:center;justify-content:center;font-size:10px;font-weight:600;color:var(--color-accent);background:linear-gradient(135deg,#2b6fe21f,#2b6fe20a);border-left:1px dashed var(--color-accent);border-radius:0 8px 8px 0;opacity:.85;cursor:ew-resize;transition:background var(--transition-fast),opacity var(--transition-fast)}.coeff .coeff-drag:hover{opacity:1;background:linear-gradient(135deg,#2b6fe22e,#2b6fe20f)}.coeff .coeff-drag.active{background:#2b6fe240}.coeff .coeff-drag span{background:#ffffffe6;padding:2px 4px;border-radius:4px;box-shadow:0 1px 2px #0000001f;text-align:center}body.theme-changing .coeff .flip-btn,body.theme-changing .btn,body.theme-changing .help-btn,body.theme-changing .text-popup__close,body.theme-changing .text-popup__max{transition:none!important}.meta{display:flex;gap:var(--space-8);flex-wrap:wrap;font-size:var(--fs-base);color:var(--color-muted)}.badge{background:var(--surface-alt);border:1px solid var(--color-border);padding:4px 10px;border-radius:999px;display:inline-flex;align-items:center;gap:4px;font-size:var(--fs-base);line-height:1.2;color:var(--color-muted);font-weight:500}.poly-plot-wrap{margin-top:var(--space-8);padding:var(--space-5) var(--space-4) var(--space-4);border:1px solid var(--color-border);border-radius:10px;background:#fff;box-shadow:0 2px 6px #0000000a;display:flex;flex-direction:column;gap:var(--space-2)}#polyPlot{width:100%;height:160px}#plot{width:100%;height:560px}#plot.drop-hover{outline:3px dashed var(--color-accent);outline-offset:4px;filter:brightness(.97)}.text-popup{position:fixed;top:60px;left:60px;max-width:520px;width:520px;max-height:60vh;display:flex;flex-direction:column;z-index:1200;padding:0;overflow:hidden;background:#fff;border:1px solid var(--color-border);border-radius:14px;box-shadow:var(--shadow-card)}.text-popup__header{display:flex;align-items:center;justify-content:space-between;gap:12px;padding:10px 14px;border-bottom:1px solid var(--color-border);background:linear-gradient(#f9fafb,#f1f5f9)}.text-popup__title{font-size:13px;font-weight:600;flex:1;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.text-popup__actions{display:flex;align-items:center;gap:10px}.text-popup__trunc{font-size:11px;color:var(--color-muted);text-transform:uppercase;letter-spacing:.5px}.text-popup__body{margin:0;padding:12px 14px 16px;font-size:12px;line-height:1.4;overflow:auto;white-space:pre;background:#fff;scrollbar-width:thin;scrollbar-color:#a3b0bc #eef2f6}.text-popup__body code{font-family:var(--ff-mono)}.help-popup{text-align:left;max-width:760px;width:720px;max-height:72vh}.help-popup .text-popup__body{font-size:13px;line-height:1.35}.help-popup .text-popup__body p{margin:0 0 6px}.help-popup .text-popup__body h3{margin:12px 0 6px;font-size:14px}.help-popup .text-popup__body mjx-container[display=true]{margin:6px 0!important}.help-popup .text-popup__body mjx-container:not([display=true]){margin:0 1px}.help-popup ul{margin:0 0 12px 20px;padding:0}.help-popup li{margin:0 0 6px}.help-popup code{background:#f1f5f9;padding:2px 4px;border-radius:4px;font-size:12px}.help-popup .MathJax{font-size:1.05em}.text-popup__body::-webkit-scrollbar{width:10px}.text-popup__body::-webkit-scrollbar-track{background:#eef2f6}.text-popup__body::-webkit-scrollbar-thumb{background:#c1ccd6;border-radius:6px;border:2px solid #eef2f6}.text-popup__body::-webkit-scrollbar-thumb:hover{background:#acb8c2}.app-footer{width:min(1100px,100%);margin:0 auto var(--space-9);display:flex;justify-content:flex-end;font-size:var(--fs-base);color:var(--color-muted);gap:var(--space-7)}.debug-toggle{cursor:pointer;-webkit-user-select:none;user-select:none;display:flex;align-items:center;gap:6px}body.dark{--color-bg: #232e3a;--surface-card: #2c3947;--surface-alt: #344354;--color-border: #445465;--color-grid: #4a5b6d;--color-ink: #f4f8fb;--color-muted: #c2ccd6;--color-accent: #3182ff;--shadow-card: 0 6px 24px rgba(0,0,0,.42);--shadow-btn: 0 2px 4px rgba(0,0,0,.5)}body.dark .card{background:var(--surface-card)}body.dark input[type=text]{background:#243242;color:var(--color-ink);border-color:var(--color-border)}body.dark input[type=text]:focus{outline:2px solid rgba(59,130,246,.35);border-color:#3b82f6}body.dark .help-btn{background:linear-gradient(#2f3c4b,#384858);color:#b9dcff;border-color:#486078}body.dark .help-btn:hover{background:linear-gradient(#364555,#405062)}body.dark :where(.btn,.coeff .flip-btn,.text-popup__close,.text-popup__max){background:var(--surface-alt);color:var(--color-muted);border-color:var(--color-border);box-shadow:var(--shadow-btn)}body.dark :where(.btn,.coeff .flip-btn,.text-popup__close,.text-popup__max):hover{background:#3b4a5b;color:var(--color-ink);border-color:#3182ff}body.dark .text-popup{background:var(--surface-alt)}body.dark .text-popup__header{background:linear-gradient(#344456,#2c3947);border-color:var(--color-border)}body.dark .text-popup__body{background:var(--surface-alt);scrollbar-color:#4c5d6e #2c3947}body.dark code{background:#25313b}body.dark #plot.drop-hover{outline-color:#3b82f6}body.dark .poly-plot-wrap{background:var(--surface-alt)}body.dark .meta{color:var(--color-muted)}body.dark .badge{color:var(--color-ink)}body.dark .coeff .coeff-drag{background:linear-gradient(135deg,#3182ff33,#3182ff14);border-left-color:#3182ff}body.dark .coeff .coeff-drag.active{background:#3182ff4d}body.dark .coeff .coeff-drag span{background:#2c3947}body.dark .text-popup__body::-webkit-scrollbar-track{background:#2c3947}body.dark .text-popup__body::-webkit-scrollbar-thumb{background:#4c5d6e;border:2px solid #2c3947}body.dark .text-popup__body::-webkit-scrollbar-thumb:hover{background:#5a6c7f}body.debug .card{outline:2px dashed #b7791f}body.debug .panel-left{outline:2px dashed #2b6fe2}body.debug .coeffs{outline:2px dashed #d62d20}body.debug #plot{outline:2px dashed #0072ce}body.debug [data-debug]{position:relative}body.debug [data-debug]:after{content:attr(data-debug);position:absolute;top:2px;left:4px;font-size:10px;line-height:1.1;background:#ffff00d9;padding:1px 4px 2px;border-radius:3px;color:#111;font-family:var(--ff-mono, ui-monospace, monospace);pointer-events:none;max-width:180px;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}body.debug .debug-inspector{position:fixed;z-index:5000;pointer-events:none;background:#ffff00f2;color:#111;font:10px/1.2 var(--ff-mono, ui-monospace, monospace);padding:4px 6px;border-radius:4px;box-shadow:0 2px 6px #00000040;max-width:320px;white-space:nowrap;transform:translate(6px,6px)}body.debug .debug-inspector strong{font-weight:600}body.debug .debug-inspector code{font-family:var(--ff-mono, ui-monospace, monospace);font-size:10px;background:#00000014;padding:1px 3px;border-radius:3px}body.debug .debug-hover-outline{position:fixed;z-index:4999;pointer-events:none;border:2px dashed #ffbf00;background:#ffbf0014}body.debug .debug-toast{position:fixed;z-index:6000;left:50%;top:18px;transform:translate(-50%);background:#111;color:#fff;font:11px/1.3 var(--ff-mono, ui-monospace, monospace);padding:6px 10px;border-radius:6px;box-shadow:0 4px 16px #0000004d;opacity:0;transition:opacity .25s;pointer-events:none}body.debug .debug-toast.show{opacity:.95}body.debug.debug-dim *:not(.debug-hover-outline):not(.debug-inspector):not(.debug-toast){filter:grayscale(.6) opacity(.9)}
